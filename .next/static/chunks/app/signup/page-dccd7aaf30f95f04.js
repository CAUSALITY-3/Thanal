(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{780:function(e,l,t){Promise.resolve().then(t.bind(t,2782))},449:function(e,l,t){"use strict";t.d(l,{z:function(){return a}});var n=t(7437);t(5672);let a=e=>{let{content:l,color:t,width:a,height:s,disabled:o}=e;return(0,n.jsx)("div",{className:"buttonContainer",style:{width:a||"100px",height:s||"40px",background:t||"#77DD77",":hover":{cursor:o?"not-allowed":"pointer"}},children:l})}},2782:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return v}});var n=t(7437),a=t(2265),s=t(449);t(241);var o=e=>{let{value:l,handleChange:t,keyName:s,dropDownValues:o,disabled:r,handleBlur:i}=e,[u,d]=(0,a.useState)(!1),[c,v]=(0,a.useState)(!0),[h,f]=(0,a.useState)(o),[p,m]=(0,a.useState)(""),x=(0,a.useRef)(null),g=e=>{m(e),setTimeout(()=>{e.length?f(o.filter(l=>l.toLowerCase().includes(e.toLowerCase()))):f(o)})},j=()=>{u||v(!0),d(!1),m(""),i(s,l)},y=(e,l)=>{t(e,l),v(!0),m("")},N={animation:"fadeIn 2s ease-in-out","max-height":o.length>10?"200px":"auto"},k=()=>(0,n.jsx)("div",{className:"dropDown",style:N,onMouseOver:()=>d(!0),onMouseLeave:()=>d(!1),children:h.map(e=>(0,n.jsx)("div",{className:"drop",onClick:()=>{y(s,e)},onTouchStart:()=>{y(s,e)},children:e}))});return o.length<10?(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{ref:x,className:"formInput",style:{cursor:r?"not-allowed":"auto",color:l?"black":"grey"},tabIndex:0,onFocus:()=>v(!1),onBlur:j,children:l||"Select one from list ..."}),c?(0,n.jsx)(n.Fragment,{}):k()]}):(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{ref:x,className:"formInput",type:"text",value:p||(c?l||"Select one from list ...":""),onFocus:()=>{v(!1),f(o)},onChange:e=>g(e.target.value),onBlur:j,placeholder:"Search..."}),c?(0,n.jsx)(n.Fragment,{}):h.length?k():(0,n.jsx)("div",{className:"noResult drop",children:"0 results..."})]})};t(8042);let r=e=>{let{formData:l,setFormData:t,lastOne:s}=e,{label:r,key:i,value:u,message:d,required:c,invalid:v,validation:h,disabled:f,type:p,dropDownValues:m}=l,[x,g]=(0,a.useState)(!1),j=(e,l)=>{"phone pincode".includes(e)&&(l=l.replace(/[^\d]/,"")),t(t=>({...t,[e]:{...t[e],value:l}})),(v||s)&&N(e,l)},y=(e,l)=>{N(e,l),g(!0)},N=(e,l)=>{c&&(h.find(e=>!1===e(l))?t(l=>({...l,[e]:{...l[e],invalid:!0}})):t(l=>({...l,[e]:{...l[e],invalid:!1}})))};return(0,n.jsxs)("div",{className:"formControl",children:[(0,n.jsxs)("label",{className:"formlabel",children:[r,c&&(0,n.jsx)("span",{style:{color:"#F08080"},children:"*"})]}),v&&x&&(0,n.jsx)("p",{className:"formInvalidMessage",children:d}),"input"===p?(0,n.jsx)("input",{className:"formInput",style:{cursor:f?"not-allowed":"auto"},type:"text",disabled:f,value:u,onBlur:e=>y(i,e.target.value),onChange:e=>j(i,e.target.value)}):(0,n.jsx)(o,{keyName:i,value:u,handleChange:j,handleBlur:y,disabled:!!f,dropDownValues:m||[]})]})};t(1988),t(9079);t(1800);var i=t(9079);i.env.API_BASE_URL,i.env.API_TIME_OUT;var u=t(8675),d=t(9079);(0,u.Z)({clientId:d.env.GOOGLE_CLIENT_ID||"",clientSecret:d.env.GOOGLE_CLIENT_SECRET||""});var c=t(7907);t(1429);var v=e=>{let{formDataProp:l}=e,t=(0,c.useRouter)(),[o,i]=(0,a.useState)(!1),[u,d]=(0,a.useState)(!1),[v,h]=(0,a.useState)(l);(0,a.useEffect)(()=>{l&&h(function(e){for(let t in e){var l;if(null===(l=e[t].validationArray)||void 0===l?void 0:l.length){let l=[];for(let n of e[t].validationArray)"length"===n.method&&(Array.isArray(n.value)?l.push(e=>e.length>n.value[0]&&e.length<n.value[1]):l.push(e=>e.length===n.value)),"includes"===n.method&&l.push(e=>e.includes(n.value)),"dropDown"===n.method&&l.push(l=>l&&e[t].dropDownValues.find(e=>e===l));e[t].validation=l}}return e}(l))},[]),(0,a.useEffect)(()=>{let e=Object.values(v).filter(e=>e.required&&(e.invalid||!e.value));e.length?(i(!1),1===e.length&&d(!0)):i(!0)},[v]);let f=()=>{Object.values(v).forEach(e=>{e&&(e.required&&!e.disabled&&e.validation.find(l=>!1===l(e.value))?h(l=>({...l,[e.key]:{...l[e.key],invalid:!0}})):h(l=>({...l,[e.key]:{...l[e.key],invalid:!1}})))})},p=async e=>{if(f(),console.log("details",v),o){let e=v.email.value,l={phone:v.phone.value,address:{house:v.house.value,landmark:v.landmark.value,city:v.city.value,state:v.state.value,pincode:v.pincode.value}},t=JSON.stringify({payload:l,email:e});if(console.log("payload",l,"email",e),!(await fetch("/api/addDetails",{method:"POST",body:t})).ok)throw Error("Network response was not ok")}t.push("/")};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"loginOuterDiv",children:(0,n.jsxs)("div",{className:"loginContainer",children:[(0,n.jsxs)("div",{className:"steps",children:["Step ",2," of 2"]}),(0,n.jsx)("div",{className:"formContainer",children:(0,n.jsxs)("div",{children:[Object.values(v).map((e,l)=>(0,n.jsx)(r,{formData:e,setFormData:h,lastOne:u},l)),(0,n.jsxs)("div",{className:"formControl",children:[(0,n.jsx)("div",{onClick:p,children:(0,n.jsx)(s.z,{content:"Add Details",color:o?"":"grey",disabled:!o})}),(0,n.jsx)("div",{style:{cursor:"pointer"},onClick:()=>t.push("/"),children:(0,n.jsx)(s.z,{content:"Skip",color:"#00aaee"})})]})]})})]})})})}},5672:function(){},241:function(){},8042:function(){},1429:function(){}},function(e){e.O(0,[218,568,385,971,69,744],function(){return e(e.s=780)}),_N_E=e.O()}]);